{% extends "base.html" %}
{% block content %}

<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<div style="display: flex;">
    <!-- SIDEBAR -->
    <div style="width: 230px; background: #1e1e1e; color: white; height: 100vh; padding: 20px; position: fixed;">
        <h2 style="color: #66d9ef;">Dashboard</h2>
        <hr style="border-color: #444;">
        <ul style="list-style: none; padding: 0;">
            <li><a href="/" style="color: white; text-decoration: none;">游 Inicio</a></li>
            <li><a href="/convertidor" style="color: white; text-decoration: none;">游뒆 Convertidor</a></li>
            <li><a href="/dashboard" style="color: #66d9ef; text-decoration: none;">游늵 Dashboard</a></li>
            <li><a href="/logout" style="color: white; text-decoration: none;">游뛁 Cerrar sesi칩n</a></li>
        </ul>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <div style="margin-left: 260px; padding: 20px; width: 100%;">
        <h1>Panel de estad칤sticas</h1>

        <!-- CARDS -->
        <div style="display: flex; gap: 20px; margin-top: 20px;">
            <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; width: 220px;">
                <h3>Total Convertidos</h3>
                <p style="font-size: 28px;">{{ stats.total_convertidos }}</p>
            </div>

            <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; width: 220px;">
                <h3>Im치genes</h3>
                <p style="font-size: 28px;">{{ stats.imagenes_convertidas }}</p>
            </div>

            <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; width: 220px;">
                <h3>Documentos</h3>
                <p style="font-size: 28px;">{{ stats.documentos_convertidos }}</p>
            </div>

            <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; width: 220px;">
                <h3>Usuarios</h3>
                <p style="font-size: 28px;">{{ stats.usuarios_registrados }}</p>
            </div>
        </div>

        <!-- GRAFICA 1 -->
        <div style="margin-top: 40px; width: 60%;">
            <h2>Conversiones por mes</h2>
            <canvas id="graficaMes"></canvas>
        </div>

        <!-- GRAFICA 2 -->
        <div style="margin-top: 40px; width: 40%;">
            <h2>Distribuci칩n de planes</h2>
            <canvas id="graficaPlanes"></canvas>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Gr치fica mensual
    new Chart(document.getElementById('graficaMes'), {
        type: 'line',
        data: {
            labels: {{ grafica_mes.labels | tojson }},
            datasets: [{
                label: "Conversiones",
                data: {{ grafica_mes.valores | tojson }},
                borderWidth: 2
            }]
        }
    });

    // Gr치fica de planes
    new Chart(document.getElementById('graficaPlanes'), {
        type: 'doughnut',
        data: {
            labels: {{ grafica_planes.labels | tojson }},
            datasets: [{
                data: {{ grafica_planes.valores | tojson }},
                borderWidth: 1
            }]
        }
    });
</script>

{% endblock %}
